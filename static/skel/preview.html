<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="horizontal-container" style="width: 100%;">
        <div id="generate-form" class="vertical-container" style="width: 100%;">
        </div>
    </div>
    <script>
        urlsave = "/database/new_item/{{ id }}/{{ table }}";
        columns = JSON.parse("{{ columns_names | safe }}".replace(/'/g, '"'));
        columns_types = JSON.parse("{{ columns_types | safe }}".replace(/'/g, '"'));
        inputs = document.getElementsByTagName("input");
        textareas = document.getElementsByTagName("textarea");
        textdata = ["", ""];
        ignore_columns = /created|id|title/gi;
        value = new Array();

        {%for i in range(0,len)%}
            value[{{i}}] = decodeURI("{{item[i]}}").replace(/\%27/g, "'")
        {%endfor%}
        

        function generate_form(){
            for (let x = 0; x < columns.length; x++){
                if (columns[x] == "title"){
                    document.getElementById("generate-form").innerHTML += "" +
                        "<span style='font-size:32px;'>" + value[x] + " </span><hr>";
                }
                if (ignore_columns.test(columns[x]) == false){
                    document.getElementById("generate-form").innerHTML += "" + 
                        "<b>" + columns[x].charAt(0).toUpperCase() + columns[x].slice(1).replace("_", " ") + ": </b>";
                    
                    switch(columns_types[x]){
                        case "LONGTEXT":
                            document.getElementById("generate-form").innerHTML += "<pre>" + value[x] + "</pre>";
                            break;
                        default:
                            document.getElementById("generate-form").innerHTML += value[x];
                            break;
                    }
                }
                ignore_columns.lastIndex = 0;
            }
        }
        generate_form();
    </script>
</body>
</html>